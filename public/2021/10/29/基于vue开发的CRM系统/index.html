<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  

  
  <title>vue后台管理系统 | Carr&#39;Blog</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="1. 功能模块       （1）客户管理    - 仪表盘    - 待办事项    - 线索    - 客户    - 联系人    - 商机    - 合同    - 回款    - 发票    - 产品    - 市场活动（2）人力资源（3）日志（4）项目管理（5）任务审批                     2. 技术栈       &amp;#x76">
<meta property="og:type" content="article">
<meta property="og:title" content="vue后台管理系统">
<meta property="og:url" content="http://example.com/2021/10/29/%E5%9F%BA%E4%BA%8Evue%E5%BC%80%E5%8F%91%E7%9A%84CRM%E7%B3%BB%E7%BB%9F/index.html">
<meta property="og:site_name" content="Carr&#39;Blog">
<meta property="og:description" content="1. 功能模块       （1）客户管理    - 仪表盘    - 待办事项    - 线索    - 客户    - 联系人    - 商机    - 合同    - 回款    - 发票    - 产品    - 市场活动（2）人力资源（3）日志（4）项目管理（5）任务审批                     2. 技术栈       &amp;#x76">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2021-10-29T06:16:48.000Z">
<meta property="article:modified_time" content="2021-11-20T01:50:59.305Z">
<meta property="article:author" content="Carr Lu">
<meta property="article:tag" content="web前端 前端开发 html css js javascript vue react 小程序 node koa express mysql">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/atom.xml" title="Carr&#39;Blog" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
  
<link rel="stylesheet" href="/css/style.css">

<meta name="generator" content="Hexo 5.4.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Carr&#39;Blog</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">首页</a>
        
          <a class="main-nav-link" href="/about">关于</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="搜索"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://example.com"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main"><article id="post-基于vue开发的CRM系统" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2021/10/29/%E5%9F%BA%E4%BA%8Evue%E5%BC%80%E5%8F%91%E7%9A%84CRM%E7%B3%BB%E7%BB%9F/" class="article-date">
  <time datetime="2021-10-29T06:16:48.000Z" itemprop="datePublished">2021-10-29</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      vue后台管理系统
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        
        <h5 id="1-功能模块">
          <a href="#1-功能模块" class="heading-link"><i class="fas fa-link"></i></a><a href="#1-功能模块" class="headerlink" title="1. 功能模块"></a>1. 功能模块</h5>
      <p>（1）客户管理<br>    - 仪表盘<br>    - 待办事项<br>    - 线索<br>    - 客户<br>    - 联系人<br>    - 商机<br>    - 合同<br>    - 回款<br>    - 发票<br>    - 产品<br>    - 市场活动<br>（2）人力资源<br>（3）日志<br>（4）项目管理<br>（5）任务审批</p>

        <h5 id="2-技术栈">
          <a href="#2-技术栈" class="heading-link"><i class="fas fa-link"></i></a><a href="#2-技术栈" class="headerlink" title="2. 技术栈"></a>2. 技术栈</h5>
      <p><span class="exturl"><a class="exturl__link" href="mailto:&#x76;&#x75;&#x65;&#64;&#50;&#46;&#120;">&#x76;&#x75;&#x65;&#64;&#50;&#46;&#120;</a><span class="exturl__icon"><i class="fas fa-external-link-alt"></i></span></span><br><span class="exturl"><a class="exturl__link" href="mailto:&#118;&#x75;&#101;&#x2d;&#99;&#108;&#105;&#64;&#x33;&#x2e;&#120;">&#118;&#x75;&#101;&#x2d;&#99;&#108;&#105;&#64;&#x33;&#x2e;&#120;</a><span class="exturl__icon"><i class="fas fa-external-link-alt"></i></span></span><br>vue-router<br>vuex<br>axios<br>element-ui</p>

        <h5 id="3-搭建开发环境">
          <a href="#3-搭建开发环境" class="heading-link"><i class="fas fa-link"></i></a><a href="#3-搭建开发环境" class="headerlink" title="3. 搭建开发环境"></a>3. 搭建开发环境</h5>
      <p>(1) 安装node<br>(2) 安装vue-cli</p>
<pre><code>npm install vue-cli -g
</code></pre>

        <h5 id="4-项目初始化">
          <a href="#4-项目初始化" class="heading-link"><i class="fas fa-link"></i></a><a href="#4-项目初始化" class="headerlink" title="4. 项目初始化"></a>4. 项目初始化</h5>
      <pre><code>vue create crm
</code></pre>

        <h5 id="5-github管理代码">
          <a href="#5-github管理代码" class="heading-link"><i class="fas fa-link"></i></a><a href="#5-github管理代码" class="headerlink" title="5. github管理代码"></a>5. github管理代码</h5>
      <p>（1）github上创建远程代码仓库</p>

        <h5 id="6-项目规划">
          <a href="#6-项目规划" class="heading-link"><i class="fas fa-link"></i></a><a href="#6-项目规划" class="headerlink" title="6. 项目规划"></a>6. 项目规划</h5>
      <p>|- api<br>|- assets<br>|- components<br>    |- CreateView.vue   // 新建页面通用组件<br>|- directives<br>|- filters<br>|- router<br>|- store<br>|- styles<br>|- utils<br>|- views<br>    |- CustomerManagement<br>        |- components<br>            |- CrmListHead.vue // 客户管理通用页头<br>        |- customer<br>            |- CustomerIndex.vue<br>|- App.vue<br>|- main.js<br>|- permission.js</p>

        <h5 id="6-axios封装">
          <a href="#6-axios封装" class="heading-link"><i class="fas fa-link"></i></a><a href="#6-axios封装" class="headerlink" title="6. axios封装"></a>6. axios封装</h5>
      <pre><code>import axios from &#39;axios&#39;

const service = axios.create(&#123;
    baseURL: process.env.BASE_API,
    timeout: 15000
&#125;)

service.interceptors.request.use(config =&gt; &#123;

&#125;)

service.interceptors.response.use(response =&gt; &#123;

&#125;)

export default service
</code></pre>

        <h5 id="7-请求API">
          <a href="#7-请求API" class="heading-link"><i class="fas fa-link"></i></a><a href="#7-请求API" class="headerlink" title="7. 请求API"></a>7. 请求API</h5>
      <p>api/user.js</p>
<pre><code>import request from &#39;@/utils/request&#39;

export default login (username, password) &#123;
    return request(&#123;
        url: &#39;/login&#39;,
        data: &#123;
            username,
            password
        &#125;
    &#125;)
&#125;
</code></pre>

        <h5 id="8-公共模块封装">
          <a href="#8-公共模块封装" class="heading-link"><i class="fas fa-link"></i></a><a href="#8-公共模块封装" class="headerlink" title="8. 公共模块封装"></a>8. 公共模块封装</h5>
      <p>（1）新建页面组件</p>
<pre><code>&lt;template&gt;
    &lt;transition name=&quot;opacity-fade&quot;&gt;
        &lt;div 
            class=&quot;c-view&quot;
            :style=&quot;&#123;&#39;background-color&#39;: backgroundColor, &#39;padding&#39;: padding&#125;&quot;
        &gt;
            &lt;el-card
                v-loading=&quot;loading&quot;
                :style=&quot;&#123;&#39;width&#39;: width&#125;&quot;
            &gt;
                &lt;slot name=&quot;header&quot; /&gt;
                &lt;slot /&gt;
            &lt;/el-card&gt;
        &lt;/div&gt;
    &lt;/transition&gt;
&lt;/template&gt;
&lt;script&gt;
export default &#123;
    name: &#39;CreateView&#39;,
    props: &#123;
        borderStyle: &#123;
            type: Object,
            default: () =&gt; &#123;
                return &#123;&#125;
            &#125;
        &#125;,
        loading: &#123;
            type: Boolean,
            default: false
        &#125;,
        width: &#123;
            type: String,
            default: &#39;700px&#39;
        &#125;,
        backgroundColor: &#123;
            type: String,
            default: &#39;#F5F6F9&#39; // rgba(0, 0, 0, 0.6) 黑色半透明
        &#125;,
        /** 展示内容的上下padding **/
        padding: &#123;
            type: String,
            default: &#39;40px&#39;
        &#125;
    &#125;,
    data () &#123;
        return &#123;
            
        &#125;
    &#125;
&#125;
&lt;/script&gt;
&lt;style lang=&quot;scss&quot; scoped&gt;
.opacity-fade-enter,
.opacity-fade-leave-active&#123;
    transition: all 0.2s;
&#125;
.opacity-fade-enter,
.opacity-fade-leave-to&#123;
    opacity: 0;
&#125;
&lt;/style&gt;
</code></pre>

        <h5 id="7-状态管理">
          <a href="#7-状态管理" class="heading-link"><i class="fas fa-link"></i></a><a href="#7-状态管理" class="headerlink" title="7. 状态管理"></a>7. 状态管理</h5>
      <ul>
<li>store/index.js</li>
</ul>
<pre><code>import Vue from &#39;vue&#39;
import Vuex from &#39;vuex&#39;
import getters from &#39;./getters&#39;
import customer from &#39;./modules/customer&#39;

Vue.use(Vuex)

const store = new Vuex.Store(&#123;
    modules: &#123;
        app,
        customer
    &#125;,
    getters
&#125;)

export default store
</code></pre>
<ul>
<li>store/getters.js</li>
</ul>
<pre><code>const getters = &#123;
    crm: state =&gt; state.user.crm
&#125;

export default getters
</code></pre>
<ul>
<li>store/modules/user.js</li>
</ul>
<pre><code>import &#123; login, logout &#125; from &#39;@/api/login&#39;
const app = &#123;
    state: &#123;
        crm: &#123;&#125;,    // 客户管理
    &#125;,
    mutations: &#123;
        SET_CRM: (state, crm) =&gt; &#123;
            state.crm = crm
        &#125;
    &#125;,
    actions: &#123;
        Login(&#123;commit&#125;, userInfo)&#123;
            return new Promise((resolve, reject) =&gt; &#123;
                login(username, userInfo.password).then(data =&gt; &#123;
                    commit(&#39;SET_CRM&#39;, data.auth.crm)
                &#125;).catch(error =&gt; &#123;
                    reject(error)
                &#125;)
            &#125;)
        &#125;
    &#125;
&#125;
export default app
</code></pre>

        <h5 id="6-客户模块">
          <a href="#6-客户模块" class="heading-link"><i class="fas fa-link"></i></a><a href="#6-客户模块" class="headerlink" title="6. 客户模块"></a>6. 客户模块</h5>
      <p>（1）</p>
<p>（2）分析页面，筛选通用部分，封装成公共组件</p>
<ul>
<li>页头部分公用组件封装<br>CrmListHead<br>```<template>
  <div class="container">
      <div>vue后台管理系统</div>
      <el-input placeholder="placeholder" @input="inputChange" v-model="inputContent">
          <el-button icon="el-icon-search" @click.native="searchInput">
      </el-button></el-input>  
      <div class="right-container">
          <el-button v-if="cansave" type="primary" @click="createClick"></el-button>
          <el-dropdowm v-if="moreTypes.length > 0" trigger="click" @command="handleTypeDrop">
              <el-dropdown-menu slot="dropdown">
                  <el-dropwdown-item v-for="(item, index) in moreTypes" :key="index">
                      
                  </el-dropwdown-item></el-dropdown-menu></el-dropdowm>
              
          <el-dropdown>
      </el-dropdown></div>
      <crm-create-view v-if="isCreate" :crmtype>
  </crm-create-view></div>
</template></li>
</ul>
<script>
import { mapGetters } from 'vuex'
import CrmCreateView from '@/components/CrmCreateView'
export default {
    name: 'CrmListHead',
    components: {
        CrmCreateView
    },
    data () {
        return {
            inputContent: '',
            moreTypes: []
        }
    },
    props: {
        // 页头主标题
        title: {
            type: String,
            default: '
        },
        placeholder: {
            type: String,
            default: '请输入内容'
        },
        // 页头按钮文字
        mainTitle: {
            type: String,
            default: ''
        },
        crmType: {
            type: String,
            default: ''
        },
        isSeas: {
            type: Boolean,
            default: false
        }
    },
    computed: {
        ...mapGetters(['crm']),
        canSave () {

        }
    },
    mounted () {
        // 线索和客户判断更多操作
        if (!this.isSeas) {
            if (this.crm[this.crmType].excelimport) {
                this.moreTypes.push({type: 'enter', name: '导入'})
            }
            if (this.crm[this.crmType].excelexport) {
                this.moreTypes.push({type: 'out', name: '导出'})
            }
        } else {
             // 客户池的导出关键字不同
            if (this.crm.pool.excelexport) {
                this.moreTypes.push({ type: 'out', name: '导出' })
            }
        }
    },
    methods: {
        // 下拉菜单点击
        handleTypeDrop(command, param = {}) {
            if (command === 'out') {

            } else if (command === 'enter') {

            }
        }
        inputChange() {
            this.$emit('update:search', this.inputContent)
        },
        searchInput () {
            this.$emit('on-search', this.inputContent)
        },
        // 新建按钮
        createClick () {

        }
    }
}
</script>
<pre><code>
（2）mixins

mixin/table.js
</code></pre>
<p>import {<br>    crmCustomerIndex<br>} from ‘@/api/customerManagment/customer’<br>export default {<br>    components: {<br>        CrmListHead,<br>    },<br>    data () {<br>        return {<br>            loading: false, // 是否加载中<br>            list: [],   // 表格数据<br>            search: ‘’  // 搜索内容<br>            fieldList: [],  // 表格字段<br>            currentPage: 1, // 当前页面<br>            total: 0,   // 总页数<br>            pageSize: [15, 30, 60, 100],<br>            selectList: [], // 选中的数据<br>        }<br>    },<br>    computed: {<br>        …mapGetters([‘crm’])<br>    },<br>    mounted () {<br>        // 控制table的高度<br>        window.resize = () =&gt; {<br>            this.updateTableHeight()<br>        }<br>    },<br>    methods: {<br>        // 获取数据<br>        getList () {<br>            this.loading = true<br>            var crmIndexRequest = this.getIndexRequest()<br>            // API请求参数<br>            var params = {<br>                page: this.currentPage,<br>                limit: this.pageSize,<br>                search: this.search,<br>                type: this.isSeas ? crmTypeModel.pool : crmTypeModel[this.crmType]<br>            }<br>            // 执行请求<br>            crmIndexRequest(params).then(res =&gt; {<br>                if () {</p>
<pre><code>            &#125; else &#123;
                this.list = res.data.list
            &#125;
            this.total = res.data.totalRow
            this.loading = false
        &#125;).catch(() =&gt;  &#123;
            this.loading = false
        &#125;)
    &#125;,
    // 判断当前页面要执行的API请求
    getIndexRequest () &#123;
        if (this.crmType === &#39;leads&#39;) &#123;
            return crmLeadsIndex
        &#125; else if (this.crmType === &#39;customer&#39;) &#123;
            if (this.isSeas) &#123;
                return crmCustomerPool
            &#125; else &#123;
                return crmCustomerIndex
            &#125;
        &#125; else if (this.crmType === &#39;contacts&#39;) &#123;
            return crmContactsIndex
        &#125; else if (this.crmType === &#39;business&#39;) &#123;
            return crmBusinessIndex
        &#125; else if (this.crmType === &#39;product&#39;) &#123;
            return crmProductIndex
        &#125;
    &#125;,
    // 搜索
    crmSearch (value) &#123;

    &#125;
    // 获取表格字段
    getFieldList () &#123;
        
    &#125;
&#125;
</code></pre>
<p>}</p>
<pre><code>
（3）客户管理页面

CustomerIndex.vue
</code></pre>
<template>
    <crm-list-head ref="listHead" title="客户管理" :crm-type="crmType" placeholder="请输入客户名称/手机号" main-title="新建客户">
    <div>
        <crm-table-head <pre><code>    /&gt;
    &lt;el-table
        v-loading=&quot;loading&quot;
        :data=&quot;list&quot;
        style=&quot;width: 100%&quot;
        border
        stripe
    &gt;
        &lt;el-table-column
            show-overflow-tooltip
            type=&quot;selection&quot;
            align=&quot;center&quot;
            width=&quot;55&quot;
        /&gt;
        &lt;!-- 遍历字段 --&gt;
        &lt;el-table-column
            v-for=&quot;(item, index) in fieldList&quot;
            :key=&quot;item.id&quot;
            :prop=&quot;item.prop&quot;
            :label=&quot;item.label&quot;
            sortable=&quot;custom&quot;
            show-overflow-tooltip
        &gt;
            &lt;template
                slot=&quot;header&quot;
                slot-scope=&quot;scope&quot;
            &gt;
                &lt;div class=&quot;table-head-name&quot;&gt;&#123;&#123;scope.column.label&#125;&#125;&lt;/div&gt;
            &lt;/template&gt;
        &lt;el-table-column/&gt;
        &lt;el-table-column
            fixed=&quot;right&quot;
            width=&quot;36&quot;
         &gt;
            
         &lt;/el-table-column&gt;
    &lt;/el-table&gt;
    &lt;!-- 分页 --&gt;
    &lt;div class=&quot;p-container&quot;&gt;
        &lt;el-pagition 
            class=&quot;p-bar&quot;
            :current-page=&quot;currentPage&quot;
            :page-sizes=&quot;pageSizes&quot;
            :titla=&quot;total&quot;
            layout=&quot;totla, sizes, next, prev, jumper&quot;
            @current-change=&quot;handleCurrentChange&quot;
        /&gt;
    &lt;/div&gt;
&lt;/div&gt;
</code>
</crm-table-head></div></crm-list-head></template>
<script>
import { mapGetters } from 'vuex'
export default {
    name: 'CustomerIndex',
    components: {

<pre><code>&#125;,
computed: &#123;
    ...mapGetters([&#39;CRMconfig&#39;])
&#125;,
minins: [],
data () &#123;
    return &#123;
        crmType: &#39;customer&#39;
    &#125;
&#125;,
methods: &#123;

&#125;
</code></pre>
<p>}<br></script><p></p>
<style lang="scss" scoped>

</style>
<pre><code>
</code></pre>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2021/10/29/%E5%9F%BA%E4%BA%8Evue%E5%BC%80%E5%8F%91%E7%9A%84CRM%E7%B3%BB%E7%BB%9F/" data-id="ckwou9u68000u9hwn2fo59j4y" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2021/10/29/%E5%A6%82%E4%BD%95%E7%94%A8vue%E9%80%A0%E8%BD%AE%E5%AD%90/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          vue组件库开发
        
      </div>
    </a>
  
  
    <a href="/2021/10/29/hexo%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">hexo搭建博客</div>
    </a>
  
</nav>

  
</article>

</section>
        
          <aside id="sidebar">
  
    

  
    

  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">归档</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/12/">十二月 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/11/">十一月 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/10/">十月 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/06/">六月 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/05/">五月 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/02/">二月 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/01/">一月 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/10/">十月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/01/">一月 2020</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">最新文章</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2021/12/01/%E4%B8%89%E5%88%86%E9%92%9F%E4%BA%86%E8%A7%A3gitactions/">三分钟了解Github Actions</a>
          </li>
        
          <li>
            <a href="/2021/11/20/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5/">前端工程化最佳实践</a>
          </li>
        
          <li>
            <a href="/2021/10/31/%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8react/">快速入门react</a>
          </li>
        
          <li>
            <a href="/2021/10/31/%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8vue/">快速入门vue</a>
          </li>
        
          <li>
            <a href="/2021/10/30/react-hooks/">react-hooks</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2021 Carr Lu<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">首页</a>
  
    <a href="/about" class="mobile-nav-link">关于</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  
<link rel="stylesheet" href="/fancybox/jquery.fancybox.css">

  
<script src="/fancybox/jquery.fancybox.pack.js"></script>




<script src="/js/script.js"></script>




  </div>
</body>
</html>